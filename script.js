const decemberDays = {
    day1: {
        text: "Ð’Ñ‹Ñ€ÐµÐ¶Ð¸ ÑÐ½ÐµÐ¶Ð¸Ð½ÐºÐ¸ Ð¸Ð· Ð±ÑƒÐ¼Ð°Ð³Ð¸ Ð¸ ÑƒÐºÑ€Ð°ÑÑŒ Ð¸Ð¼Ð¸ Ð´Ð¾Ð¼",
        photo: "1 Snezhinki.jpg",
        opened: false,
        id: 1
    },
    day2: {
        text: "Ð’ÐºÑƒÑÐ½Ð°Ñ ÑˆÐ¾ÐºÐ¾Ð»Ð°Ð´ÐºÐ°",
        photo: "2 Shoko.jpg",
        opened: false,
        id: 2
    },
    day3: {
        text: "ÐŸÐ¾ÑÑ‚Ð°Ð²ÑŒ ÐµÐ»ÐºÑƒ Ð¸ ÑƒÐºÑ€Ð°ÑÑŒ Ð´Ð¾Ð¼",
        photo: "3 Elka.jpg",
        opened: false,
        id: 3
    },
    day4: {
        text: "ÐŸÐ°ÑÑ‚Ð¸Ð»Ð°",
        photo: "4 Pastila.jpg",
        opened: false,
        id: 4
    },
    day5: {
        text: "Ð¡Ð¼Ð°ÑÑ‚ÐµÑ€Ð¸ ÐµÐ»Ð¾Ñ‡Ð½ÑƒÑŽ Ð¸Ð³Ñ€ÑƒÑˆÐºÑƒ",
        photo: "5 Igrushka.jpg",
        opened: false,
        id: 5
    },
    day6: {
        text: "ÐÑ€Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ ÑÐ²ÐµÑ‡ÐºÐ°",
        photo: "6 Svechka.jpg",
        opened: false,
        id: 6
    },
    day7: {
        text: "Ð¡Ð¾ÑÑ‚Ð°Ð²ÑŒ ÑÐ¿Ð¸ÑÐ¾Ðº Ñ†ÐµÐ»ÐµÐ¹ Ð½Ð° Ð±ÑƒÐ´ÑƒÑ‰Ð¸Ð¹ Ð³Ð¾Ð´",
        photo: "7 Celi.jpg",
        opened: false,
        id: 7
    },
    day8: {
        text: "ÐšÑ€ÐµÐ¼ Ð´Ð»Ñ Ñ€ÑƒÐº",
        photo: "8 Krem.png",
        opened: false,
        id: 8
    },
    day9: {
        text: "Ð£ÑÑ‚Ñ€Ð¾Ð¹ Ð²ÐµÑ‡ÐµÑ€ Ñ Ð´Ñ€ÑƒÐ·ÑŒÑÐ¼Ð¸",
        photo: "9 Friends.jpg",
        opened: false,
        id: 9
    },
    day10: {
        text: "ÐžÑ€ÐµÑ…Ð¸ Ð¸ ÑÑƒÑ…Ð¾Ñ„Ñ€ÑƒÐºÑ‚Ñ‹",
        photo: "10 Orehi.jpg",
        opened: false,
        id: 10
    },
    day11: {
        text: "Ð£ÑÑ‚Ñ€Ð¾Ð¹ Ð²ÐµÑ‡ÐµÑ€ Ð¿Ð¾Ñ†ÐµÐ»ÑƒÐµÐ² Ð¸ Ð½Ðµ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ðŸ˜",
        photo: "11 Pocelui.jpeg",
        opened: false,
        id: 11
    },
    day12: {
        text: "Ð’ÐºÑƒÑÐ½Ñ‹Ð¹ Ð½Ð°Ð±Ð¾Ñ€ Ñ‡Ð°Ñ",
        photo: "12 Chai.jpeg",
        opened: false,
        id: 12
    },
    day13: {
        text: "ÐŸÐ¾Ñ€Ð°Ð´ÑƒÐ¹ ÑÐµÐ±Ñ! Ð—Ð°ÐºÐ°Ð¶Ð¸ Ð¿Ð¸Ñ†Ñ†Ñƒ/ÑÑƒÑˆÐ¸",
        photo: "13 Pizza.jpg",
        opened: false,
        id: 13
    },
    day14: {
        text: "Ð—ÐµÑ„Ð¸Ñ€",
        photo: "14 Zefir.jpeg",
        opened: false,
        id: 14
    },
    day15: {
        text: "ÐŸÐ¾Ð´Ð²ÐµÐ´Ð¸ Ð¸Ñ‚Ð¾Ð³Ð¸ Ð³Ð¾Ð´Ð°, Ð²ÑÐ¿Ð¾Ð¼Ð½Ð¸ ÑÐ°Ð¼Ñ‹Ðµ Ð²Ð°Ð¶Ð½Ñ‹Ðµ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚Ñ‹",
        photo: "15 Itogi.jpg",
        opened: false,
        id: 15
    },
    day16: {
        text: "Kinder ÑÑŽÑ€Ð¿Ñ€Ð¸Ð·",
        photo: "16 kinder.jpg",
        opened: false,
        id: 16
    },
    day17: {
        text: "Ð¡Ñ…Ð¾Ð´Ð¸ Ð½Ð° ÐºÐ°Ñ‚Ð¾Ðº",
        photo: "17 katok.jpg",
        opened: false,
        id: 17
    },
    day18: {
        text: "Ð˜Ð³Ñ€ÑƒÑˆÐºÐ° Ð½Ð° ÐµÐ»ÐºÑƒ",
        photo: "18 IgrNaElku.jpeg",
        opened: false,
        id: 18
    },
    day19: {
        text: "Ð˜ÑÐ¿ÐµÐºÐ¸ Ð¿Ñ€Ð°Ð·Ð´Ð½Ð¸Ñ‡Ð½Ð¾Ðµ Ð¿ÐµÑ‡ÐµÐ½ÑŒÐµ",
        photo: "19 Pechene.jpg",
        opened: false,
        id: 19
    },
    day20: {
        text: "ÐÐ¾Ð²Ð¾Ð³Ð¾Ð´Ð½Ð¸Ðµ Ð½Ð¾ÑÐºÐ¸",
        photo: "20 Socks.jpg",
        opened: false,
        id: 20
    },
    day21: {
        text: "ÐŸÐ¾ÑÐ¼Ð¾Ñ‚Ñ€Ð¸ Ð½Ð¾Ð²Ð¾Ð³Ð¾Ð´Ð½Ð¸Ð¹ Ñ„Ð¸Ð»ÑŒÐ¼/Ð¼ÑƒÐ»ÑŒÑ‚Ñ„Ð¸Ð»ÑŒÐ¼",
        photo: "21 Film.jpg",
        opened: false,
        id: 21
    },
    day22: {
        text: "ÐœÐ°Ñ€Ð¼ÐµÐ»Ð°Ð´",
        photo: "22 Marmelad.jpg",
        opened: false,
        id: 22
    },
    day23: {
        text: "Ð¡Ð²Ð°Ñ€Ð¸ Ð³Ð»Ð¸Ð½Ñ‚Ð²ÐµÐ¹Ð½",
        photo: "23 Glintwein.jpg",
        opened: false,
        id: 23
    },
    day24: {
        text: "ÐŸÐ°Ð·Ð» Ñ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð¼ ÐÐ¾Ð²Ð¾Ð³Ð¾ Ð“Ð¾Ð´Ð°",
        photo: "24 Puzzle.jpg",
        opened: false,
        id: 24
    },
    day25: {
        text: "ÐŸÐ¾Ð¸Ð³Ñ€Ð°Ñ‚ÑŒ Ð² ÑÐ½ÐµÐ¶ÐºÐ¸/ÑÐ»ÐµÐ¿Ð¸Ñ‚ÑŒ ÑÐ½ÐµÐ³Ð¾Ð²Ð¸ÐºÐ°",
        photo: "25 Snowman.jpg",
        opened: false,
        id: 25
    },
    day26: {
        text: "Ð¡Ð»Ð°Ð´ÐºÐ¸Ð¹ Ð¿Ð¾Ð´Ð°Ñ€Ð¾Ðº",
        photo: "26 Podarok.jpg",
        opened: false,
        id: 26
    },
    day27: {
        text: "Ð¡Ð¾ÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð½Ð¾Ð²Ð¾Ð³Ð¾Ð´Ð½ÐµÐµ Ð¼ÐµÐ½ÑŽ",
        photo: "27 Menu.jpg",
        opened: false,
        id: 27
    },
    day28: {
        text: "Ð‘Ð¾Ð¼Ð±Ð¾Ñ‡ÐºÐ¸ Ð´Ð»Ñ Ð²Ð°Ð½Ð½Ð¾Ð¹",
        photo: "28 BombaWanna.jpg",
        opened: false,
        id: 28
    },
    day29: {
        text: "ÐŸÑƒÑÑ‚ÑŒ Ñ‚Ð²Ð¾Ð¹ Ð´Ð¾Ð¼ Ð±ÑƒÐ´ÐµÑ‚ Ñ‡Ð¸ÑÑ‚Ñ‹Ð¼ Ðº Ð½Ð¾Ð²Ð¾Ð¼Ñƒ Ð³Ð¾Ð´Ñƒ, ÑƒÐ±ÐµÑ€Ð¸ÑÑŒ Ð² Ð½ÐµÐ¼",
        photo: "29 Uborka.jpg",
        opened: false,
        id: 29
    },
    day30: {
        text: "ÐÐ¾Ð²Ð¾Ð³Ð¾Ð´Ð½ÑÑ Ð¿Ð¸Ð¶Ð°Ð¼Ð°",
        photo: "30 Pijama.jpg",
        opened: false,
        id: 30
    },
    day31: {
        text: "Ð’ÐµÑÐµÐ»Ð¾ Ð²ÑÑ‚Ñ€ÐµÑ‚Ð¸Ñ‚ÑŒ ÐÐ¾Ð²Ñ‹Ð¹ Ð“Ð¾Ð´",
        photo: "31 New Year.jpg",
        opened: false,
        id: 31
    },
}
const date = new Date()
const calendarDay = date.getDate()

const days = document.querySelectorAll('.day');

const modal = document.querySelector('.modal')

const jsonStr = JSON.stringify(decemberDays)

if (!localStorage.length) {
    localStorage.setItem("decemberDays", jsonStr)
}

const loadedDays = JSON.parse(localStorage.decemberDays)

for (key in loadedDays) {
    if (loadedDays[key].opened) {
        days.forEach(e => {
            if (e.dataset.day == loadedDays[key].id) {
                e.classList.add('opened')    
            }
        })        
    }
}

days.forEach( el => {
    el.addEventListener('click', () => {
        const decemberDay = loadedDays[`day${el.dataset.day}`]
        if (el.dataset.day > calendarDay) {
            document.querySelector('.not_allowed').style.display = 'flex';
            document.querySelector('.not_allowed').classList.add("animation");
        } else {
            loadedDays[`day${el.dataset.day}`].opened = true
            let jsonStr = JSON.stringify(loadedDays)
            localStorage.setItem("decemberDays", jsonStr)            
            modal.querySelector('h2').innerHTML = el.dataset.day % 2 == 0 ? "ÐŸÐ¾Ð´Ð°Ñ€Ð¾Ðº" : "Ð—Ð°Ð´Ð°Ð½Ð¸Ðµ"
            modal.querySelector('h3').innerHTML = decemberDay.text;
            modal.querySelector('img').setAttribute('src', `./img/${decemberDay.photo}`)
            if (el.dataset.day == 7 || el.dataset.day == 20) {
                modal.querySelector('img').style.width = '80%'; 
            } else if (el.dataset.day == 24){
                modal.querySelector('img').style.width = '60%';
            } else {
                modal.querySelector('img').style.width = '100%';
            }
            document.querySelector('.modal_bg').style.display = 'flex';
            el.classList.add('opened')
            modal.classList.add("animation");
        }        
    })
})

document.querySelector('.not_allowed').addEventListener('click', (e) => {
    document.querySelector('.not_allowed').style.display = 'none'
})

document.querySelector('.modal_bg').addEventListener('click', (e) => {
    document.querySelector('.modal_bg').style.display = 'none'
})

modal.addEventListener('click', (e) => {
    e.stopPropagation();
})
